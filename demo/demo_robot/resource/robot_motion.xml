<?xml version="1.0" encoding="utf-8"?>
<Robot>
  <Model>
    <Environment type="environment" gravity="{0 , -9.8 , 0 , 0 , 0 , 0}" />
    <Variable type="variable_pool_element" default_child_type="matrix">
      <PI type="matrix">3.14159265358979</PI>
      <r1j_pe type="matrix">{ 0,0,0,0,0,0 }</r1j_pe>
      <r1i_pe type="matrix">{ 0,0,0,0,0,0 }</r1i_pe>
      <r2j_pe type="matrix">{ 1,0,0,0,0,0 }</r2j_pe>
      <r2i_pe type="matrix">{ 0,0,0,0,0,0 }</r2i_pe>
      <r3j_pe type="matrix">{ 1,0,0,0,0,0 }</r3j_pe>
      <r3i_pe type="matrix">{ 0,0,0,0,0,0 }</r3i_pe>
      <Mot_friction type="matrix">{20, 30, 560}</Mot_friction>
    </Variable>
    <Akima type="akima_pool_element" default_child_type="akima">
      <m1_akima x="{0,1,2,3,4}" y="{0,1,2,3,4}" />
      <m2_akima x="{0,1,2,3,4}" y="{0,1,2,3,4}" />
      <m3_akima x="{0,1,2,3,4}" y="{0,1,2,3,4}" />
    </Akima>
    <Part type="part_pool_element" default_child_type="part">
      <Ground active="true" inertia="{1 , 0 , 0 , 0 , 1 , 1 , 1 , 0 , 0 , 0}" pe="{0 , 0 , 0 , 0 , 0 , 0}" vel="{0 , 0 , 0 , 0 , 0 , 0}" acc="{0 , 0 , 0 , 0 , 0 , 0}" graphic_file_path="">
        <ChildMarker type="marker_pool_element" default_child_type="marker">
          <r1j pe="r1j_pe" />
        </ChildMarker>
      </Ground>
      <part1 active="true" inertia="{1 , 0 , 0 , 0 , 1 , 1 , 1 , 0 , 0 , 0}" pe="{0 , 0 , 0 , 0 , 0 , 0}" vel="{0 , 0 , 0 , 0 , 0 , 0}" acc="{0 , 0 , 0 , 0 , 0 , 0}" graphic_file_path="C:\\Users\\py033\\Desktop\\part1.xmt_txt">
        <ChildMarker type="marker_pool_element" default_child_type="marker">
          <r1i pe = "r1i_pe" />
        <r2j pe = "r2j_pe" />
        </ChildMarker>
      </part1>
      <part2 active="true" inertia="{1 , 0 , 0 , 0 , 1 , 1 , 1 , 0 , 0 , 0}" pe="{1 , 0 , 0 , PI/2 , 0 , 0}" vel="{0 , 0 , 0 , 0 , 0 , 0}" acc="{0 , 0 , 0 , 0 , 0 , 0}" graphic_file_path="C:\\Users\\py033\\Desktop\\part2.xmt_txt">
        <ChildMarker type="marker_pool_element" default_child_type="marker">
          <r2i pe = "r2i_pe" />
        <r3j pe = "r3j_pe" />
        </ChildMarker>
      </part2>
      <part3 active="true" inertia="{1 , 0 , 0 , 0 , 1 , 1 , 1 , 0 , 0 , 0}" pe="{1 , 1 , 0 , 0 , 0 , 0}" vel="{0 , 0 , 0 , 0 , 0 , 0}" acc="{0 , 0 , 0 , 0 , 0 , 0}" graphic_file_path="C:\\Users\\py033\\Desktop\\part3.xmt_txt">
        <ChildMarker type="marker_pool_element" default_child_type="marker">
          <r3i pe = "r3i_pe" />
        </ChildMarker>
      </part3>
    </Part>
    <Joint type="joint_pool_element">
      <r1 active="true" type="revolute" prt_m="part1" prt_n="Ground" mak_i="r1i" mak_j="r1j" />
      <r2 active="true" type="revolute" prt_m="part2" prt_n="part1" mak_i="r2i" mak_j="r2j" />
      <r3 active="true" type="revolute" prt_m="part3" prt_n="part2" mak_i="r3i" mak_j="r3j" />
    </Joint>
    <Motion type="motion_pool_element" default_child_type="motion">
      <m1 active="true" slave_id="0" prt_m="part1" prt_n="Ground" mak_i="r1i" mak_j="r1j" frc_coe="Mot_friction" component="5" />
      <m2 active="true" slave_id="1" prt_m="part2" prt_n="part1" mak_i="r2i" mak_j="r2j" frc_coe="Mot_friction" component="5" />
      <m3 active="true" slave_id="2" prt_m="part3" prt_n="part2" mak_i="r3i" mak_j="r3j" frc_coe="Mot_friction" component="5" />
    </Motion>
    <General_Motion type="general_motion_pool_element" default_child_type="general_motion">
    </General_Motion>
  </Model>
  <Server ip="127.0.0.1" port="5866">
   <Commands type="command_pool_object" default_child_type="command">
      <start help="start the control system."/>
      <stop help="stop the control system."/>
      <exit help="exit the control system."/>
      <help help="get help about all command."/>
      <en default_child_type="param" default="motion_param" help="enable the specify motions.">
        <motion_param type="unique" default_child_type="param" default="all">
          <all abbreviation="a" help="all motions."/>
          <motion_id abbreviation="m" default="0" help="the id of motion in model."/>
          <physical_id abbreviation="p" default="0" help="the id of motion in physical ring."/>
          <slave_id abbreviation="s" default="0" help="the id of motion in ethercat ring."/>
        </motion_param>
        <help abbreviation="h" help="get help about command 'en'."/>
      </en>
      <ds default_child_type="param" default="motion_param" help="disable the specify motions.">
        <motion_param type="unique" default_child_type="param" default="all">
          <all abbreviation="a" help="all motions."/>
          <motion_id abbreviation="m" default="0" help="the id of motion in model."/>
          <physical_id abbreviation="p" default="0" help="the id of motion in physical ring."/>
          <slave_id abbreviation="s" default="0" help="the id of motion in ethercat ring."/>
        </motion_param>
        <help abbreviation="h" help="get help about command 'ds'."/>
      </ds>
      <hm default_child_type="param" default="motion_param" help="home the specify motions.">
        <motion_param type="unique" default_child_type="param" default="all">
          <all abbreviation="a" help="all motions."/>
          <motion_id abbreviation="m" default="0" help="the id of motion in model."/>
          <physical_id abbreviation="p" default="0" help="the id of motion in physical ring."/>
          <slave_id abbreviation="s" default="0" help="the id of motion in ethercat ring."/>
        </motion_param>
        <help abbreviation="h" help="get help about command 'hm'."/>
      </hm>
      <rc help="recover the robot to specify pose."/>
      <mv default_child_type="param" default = "total_param" help="move the robot to specify pose after executing command 'rc' or move the specify axis of robot.">
        <total_param type="unique" default_child_type="param" default="mv_param">
          <mv_param type = "group" default_child_type="param" >
            <totalCount abbreviation="t" default="5000" help="the total executing time(ms)."/>
            <mode_param type = "unique" default_child_type="param" default = "pin_param">
              <pee_param type = "group" default_child_type="param">
                <x abbreviation="x" default="0" help="the 'x' direction of coordinate."/>
                <y abbreviation="y" default="0.435" help="the 'y' direction of coordinate."/>
                <A abbreviation="A" default="0" help="the 'z' direction of coordinate."/>
              </pee_param>
              <pin_param type = "group" default_child_type="param">
                <motion_param type="unique" default_child_type="param" default="all">
                  <all abbreviation="a" help="all motions."/>
                  <motion_id abbreviation="m" default="0" help="the id of motion in model."/>
                  <physical_id abbreviation="p" default="0" help="the id of motion in physical ring."/>
                  <slave_id abbreviation="s" default="0" help="the id of motion in ethercat ring."/>
                </motion_param>
                <angle abbreviation="j" default="0" help="the length(m)."/>
                <force abbreviation="f" default="no" help="force to move the axis without forward and backward limit."/>
              </pin_param>
              <pins_param type = "group" default_child_type="param">
                  <a1 abbreviation="1" default="0" help="No.1 axis in Model."/>
                  <a2 abbreviation="2" default="0" help="No.2 axis in Model."/>
                  <a3 abbreviation="3" default="0" help="No.3 axis in Model."/>
                </pins_param>
            </mode_param>
          </mv_param>
          <help abbreviation="h"  help="get help about command 'mv'."/>
        </total_param>
      </mv>
      <test default_child_type="param" default="motion_param" help="test for a new feature.">
        <motion_param type="unique" default_child_type="param" default="all">
             <all abbreviation="a" help="all motions."/>
             <motion_id abbreviation="m" default="0" help="the id of motion in model."/>
             <physical_id abbreviation="p" default="0" help="the id of motion in physical ring."/>
             <slave_id abbreviation="s" default="0" help="the id of motion in ethercat ring."/>
        </motion_param>
        <help abbreviation="h" help="get help about command 'test'."/>
      </test>
    </Commands>
  </Server>
  <Controller>
    <SlaveType type="slave_type_pool_element">
      <ElmoSoloWhistle type="slave_type" product_code="0x00030924" vender_id="0x0000009a" alias="0" distributed_clock="0x0300">
        <PDO type="pdo_group_pool_element">
          <index_1605 type="pdo_group" default_child_type="pdo" index="0x1605" is_tx="false">
            <TargetPosition index="0x607A" subindex="0x00" datatype="int32" />
            <TargetVelocity index="0x60FF" subindex="0x00" datatype="int32" />
            <TargetTorque index="0x6071" subindex="0x00" datatype="int16" />
            <MaxTorque index="0x6072" subindex="0x00" datatype="int16" />
            <ControlWord index="0x6040" subindex="0x00" datatype="uint16" />
            <ModeOfOperation index="0x6060" subindex="0x00" datatype="uint8" />
          </index_1605>
          <index_1617 type="pdo_group" default_child_type="pdo" index="0x1617" is_tx="false">
            <VelocityOffset index="0x60B1" subindex="0x00" datatype="int32" />
          </index_1617>
          <index_1618 type="pdo_group" default_child_type="pdo" index="0x1618" is_tx="false">
            <TorqueOffset index="0x60B2" subindex="0x00" datatype="int16" />
          </index_1618>
          <index_1a03 type="pdo_group" default_child_type="pdo" index="0x1A03" is_tx="true">
            <PositionActualValue index="0x6064" subindex="0x00" datatype="int32" />
            <DigitalInputs index="0x60fd" subindex="0x00" datatype="uint32" />
            <VelocityActualValue index="0x606c" subindex="0x00" datatype="int32" />
            <StatusWord index="0x6041" subindex="0x00" datatype="uint16" />
          </index_1a03>
          <index_1a1f type="pdo_group" default_child_type="pdo" index="0x1A1F" is_tx="true">
            <CurrentActualValue index="0x6078" subindex="0x00" datatype="int16" />
          </index_1a1f>
          <index_1a13 type="pdo_group" default_child_type="pdo" index="0x1A13" is_tx="true">
            <TorqueActualValue index="0x6077" subindex="0x00" datatype="int16" />
          </index_1a13>
          <index_1a0b type="pdo_group" default_child_type="pdo" index="0x1A0B" is_tx="true">
            <ModeOfOperationDisplay index="0x6061" subindex="0x00" datatype="uint8" />
          </index_1a0b>
        </PDO>
        <SDO type="sdo_pool_element" default_child_type="sdo">
          <homeMode index="0x6098" subindex="0" datatype="int8" config="35" />
          <homeAcc index="0x609A" subindex="0" datatype="uint32" config="20000" />
          <homeHighSpeed index="0x6099" subindex="1" datatype="uint32" config="25000" />
          <homeLowSpeed index="0x6099" subindex="2" datatype="uint32" config="5000" />
          <homeOffset index="0x607C" subindex="0" datatype="int32" config="0" />
        </SDO>
      </ElmoSoloWhistle>
    </SlaveType>
    <Slave type="slave_pool_element">
      <motion1 type="motion" slave_type="ElmoSoloWhistle" min_pos="0" max_pos="3.14" max_vel="9.42" home_pos="0.01" input2count="10436" />
      <motion2 type="motion" slave_type="ElmoSoloWhistle" min_pos="0" max_pos="3.14" max_vel="9.42" home_pos="0.01" input2count="10436" />
      <motion3 type="motion" slave_type="ElmoSoloWhistle" min_pos="0" max_pos="3.14" max_vel="9.42" home_pos="0.01" input2count="10436" />
    </Slave>
  </Controller>
  <Sensor>
    <SensorPool type="sensor_pool_object">
    </SensorPool>
  </Sensor>
</Robot>
